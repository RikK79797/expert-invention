name: Run My Shell Script
on:
  workflow_dispatch:
    inputs:
      script_name:
        description: 'Имя скрипта для запуска'
        required: true
        type: string
        default: 'pipeline-gen.sh'
      repo_url:
        description: 'URL репозитория для клонирования'
        required: true
        type: string
        default: 'https://github.com/prometheus/prometheus.git'
      branch_name:
        description: 'Имя ветки'
        required: false
        type: string
jobs:
  run_script:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Install Go
        run: sudo apt-get install -y golang
      - name: Install Enry
        run: go install github.com/go-enry/enry@latest
      - name: Make script executable
        run: chmod +x ./"${{ github.event.inputs.script_name }}"
      - name: Run the script
        run: ./"${{ github.event.inputs.script_name }}" --repo "${{ github.event.inputs.repo_url }}" --branch "${{ github.event.inputs.branch_name }}"
      - name: Show output
        run: cat pipeline.yaml
